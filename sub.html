<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bubu Bot Premium</title>
  <meta name="color-scheme" content="dark">
  <meta name="theme-color" content="#5865F2">
  <style>
    :root{
      --bg:#323339;
      --card:#393a41;
      --text:#ffffff;
      --muted:#b7bbc6;
      --line:#4a4c55;
      --accent:#5865F2;
      --btn:#5865F2;
      --btnText:#fff;
      --btnGhost:#2f3136;
      --btnGhostText:#d7dbe6;
      --pill:#2b2d33;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif;
      display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .card{
      width:min(760px,100%);
      background:var(--card);
      border-radius:16px;
      box-shadow:0 8px 30px rgba(0,0,0,.35);
      padding:24px;
    }
    .header{display:flex; align-items:center; gap:12px; margin-bottom:8px;}
    .diamond{
      width:28px; height:28px; display:inline-grid; place-items:center;
      background:linear-gradient(180deg,#8dd6ff,#c9e7ff);
      border-radius:8px; color:#0b1b2a; font-weight:700;
    }
    h1{font-size:22px; margin:0}
    h2{font-size:18px; margin:8px 0 4px}
    .muted{color:var(--muted)}
    .divider{height:1px; background:var(--line); margin:14px 0}
    .list{display:grid; gap:10px; margin:10px 0 0}
    .row{display:flex; gap:10px; align-items:flex-start}
    .row b{color:#fff}
    .cta{margin-top:16px; display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      appearance:none; border:0; border-radius:8px;
      padding:12px 16px; font-weight:600; cursor:pointer;
      display:flex; align-items:center; gap:8px; text-decoration:none; justify-content:center;
    }
    .btn.primary{background:var(--btn); color:var(--btnText)}
    .btn.ghost{background:var(--btnGhost); color:var(--btnGhostText)}
    .footer{margin-top:12px; color:var(--muted); font-size:14px}
    .pill{display:inline-block; background:var(--pill); padding:2px 8px; border-radius:999px; font-size:12px; color:#cfd3de}
    .hidden{display:none}
    code.copy{
      display:block; width:100%; background:#2a2c32; color:#e6e8ee;
      border:1px solid var(--line); border-radius:8px; padding:10px 12px;
      word-break:break-all; margin-top:8px;
      font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; font-size:13px;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="header">
      <div class="diamond">‚óÜ</div>
      <h1>Bubu Bot Premium</h1>
    </div>
    <h2>Get the Full Bubu Experience</h2>
    <div class="muted">Unlimited fun ‚Ä¢ Exclusive rewards ‚Ä¢ Rare collectibles</div>

    <div class="divider"></div>
    <div class="muted">Here‚Äôs what Premium includes:</div>

    <div class="list">
      <div class="row">üéÆ <div><b>Unlimited Gameplay</b> ‚Äî Play all BubuBot games with no hourly or daily limits.</div></div>
      <div class="row">üí∞ <div><b>Bigger Multipliers & Rewards</b> ‚Äî Enjoy higher payouts and bonus multipliers.</div></div>
      <div class="row">üëú <div><b>Rare Accessories & Collectibles</b> ‚Äî Unlock premium-only Bubus and outfits.</div></div>
      <div class="row">üéÅ <div><b>Future Giveaways</b> ‚Äî Automatic entry into monthly giveaways with real prizes.</div></div>
      <div class="row">üöÄ <div><b>Early Access to New Games</b> ‚Äî Play new modes and seasonal events early.</div></div>
    </div>

    <div class="divider"></div>

    <!-- Mobile instructions -->
    <div id="inDiscord" class="muted hidden">
      <p class="pill">Mobile Discord detected</p>
      <p><b>To subscribe on mobile:</b><br>
      Tap the <b>‚Ä¢‚Ä¢‚Ä¢</b> menu in the top-right ‚Üí <b>Open in Browser</b>.<br>
      Then log in and subscribe using your browser.</p>
    </div>

    <!-- OAuth login -->
    <div id="loginArea" class="muted hidden">
      <p>Login with Discord to start your Premium subscription:</p>
        <div class="cta">
          <a id="loginBtn" class="btn primary" href="#">
            <img src="https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/discord.svg"
                 width="20" height="20" alt="Discord"
                 style="filter: invert(1);">
            Login with Discord
          </a>
        </div>
    </div>

    <!-- Redirecting -->
    <div id="redirecting" class="muted hidden">
      <p>Redirecting you to the official checkout‚Ä¶</p>
      <div class="cta">
        <a id="openNow" class="btn primary" href="#">Open Now</a>
      </div>
    </div>

    <div class="divider"></div>
    <div class="footer" id="footerNote"></div>
  </div>

  <script>
    // CONFIG
    const APP_ID = "1421896407140536401";
    const SKU_ID = "1427920614915702806";
    const STORE_URL = `https://discord.com/discovery/applications/${APP_ID}/store/${SKU_ID}`;
    const REDIRECT_URI = "https://bububot.dev/sub.html";
    const OAUTH_URL =
      `https://discord.com/oauth2/authorize?client_id=${APP_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=code&scope=identify&state=bubu_premium`;

    // DETECT environment
    const ua = navigator.userAgent.toLowerCase();
    const isDiscord = ua.includes("discord");
    const isIOS = /iphone|ipad|ipod/.test(ua);
    const isAndroid = /android/.test(ua);
    const isMobile = isIOS || isAndroid;
    const inDiscordMobile = isDiscord && isMobile;

    const $ = (s)=>document.querySelector(s);
    const inDiscordEl = $("#inDiscord");
    const loginArea = $("#loginArea");
    const redirecting = $("#redirecting");
    const footer = $("#footerNote");

    $("#loginBtn").href = OAUTH_URL;
    $("#openNow").href = STORE_URL;

    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get("code");

    if (inDiscordMobile) {
      // Inside Discord mobile app ‚Üí show open-in-browser instructions
      inDiscordEl.classList.remove("hidden");
      footer.textContent = "Tip: Tap the ‚Ä¢‚Ä¢‚Ä¢ menu ‚Üí Open in Browser to continue.";
    } else if (code) {
      // User came back from OAuth login
      redirecting.classList.remove("hidden");
      footer.textContent = "Logged in. Redirecting to checkout‚Ä¶";
      setTimeout(() => window.location.replace(STORE_URL), 1000);
    } else {
      // Regular visitor ‚Üí show login button
      loginArea.classList.remove("hidden");
      footer.textContent = "Login securely with Discord before subscribing.";
    }
  </script>
</body>
</html>
